# SimulatedAnnealing（焼きなまし法）機能仕様

## 機能概要
toepliz_calに焼きなまし法（シミュレーテッドアニーリング）機能を追加し、より良いパーマネント値を探索する機能。

## 処理フロー

### 1. 初期設定
- rateを入力した後、焼きなまし法の使用有無を入力（0: 使用しない, 1: 使用する）
- 使用する場合、以下を入力：
  - `checknum`: 近傍生成時に変更するTの要素数
  - 初期Tの設定方法: 手動入力 or ランダム生成

### 2. 初期T生成
- **手動入力の場合**: ユーザーが集合Sを直接指定
- **ランダム生成の場合**: rateに合致するように以下の方法でTをランダム生成
  - 可能なインデックス範囲: -(n-1) から (n-1)
  - rateが単一値の場合: 1の比率がrate以下になるようにランダムに集合Sを選択
  - rateが範囲の場合: 1の比率がrate_lower < ratio < rate_upperになるようにランダムに集合Sを選択

### 3. 初期解の評価
- 初期TとそのパーマネントPerm(T)を計算・出力
- 結果をファイル `n{n}-toepliz-SimulatedAnnealing-YY/MM/DD/HH:min.txt` に保存
- ファイルはresultフォルダに格納

### 4. 近傍解生成と探索
- 現在のTに対してchecknum個の要素をランダムに変更してT'を生成
  - 例: checknum=2, T_21{-10,-5,1..8} → T'_21{-14,-10,1..4,6..8,12}（2要素がランダム変更）
- T'のrateを計算し、制約を満たすかチェック
- 制約を満たす場合、T'のパーマネントPerm(T')を計算

### 5. 受諾判定
- |Perm(T')| < |Perm(T)| の場合、T'を受諾
- T'を出力し、同じtxtファイルに追加保存
- T = T'として更新

### 6. 反復処理
- 5のプロセスをT''、T'''...と繰り返し実行
- より良い解を探索し続ける

## ファイル出力形式
{number}にnの値をいれる。
```
n{number}-toepliz-SimulatedAnnealing-{YY}/{MM}/{DD}/{HH}:{min}.txt
```

## データ構造
- 各ステップで記録する情報:
  - 反復回数
  - 集合S（T）
  - パーマネント値
  - 1の比率
  - 受諾/棄却の判定
  - タイムスタンプ

## 近傍生成ルール
- checknum個のランダムな要素を選択
- 選択された要素を以下のルールで変更:
  - 現在集合に含まれている要素 → 集合から削除
  - 現在集合に含まれていない要素 → 集合に追加
  - 変更は可能なインデックス範囲内でランダムに実行